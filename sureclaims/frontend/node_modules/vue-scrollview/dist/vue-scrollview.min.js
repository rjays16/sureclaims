/*!
 * vue-scrollview v3.0.1
 * (c) 2017 Chris Hurlburt
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.VueScrollview=t.VueScrollview||{})}(this,function(t){"use strict";function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function r(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function o(t,n,e,i,u){var f=-1,a=t.length;for(e||(e=c),u||(u=[]);++f<a;){var l=t[f];n>0&&e(l)?n>1?o(l,n-1,e,i,u):r(u,l):i||(u[u.length]=l)}return u}function i(t,n){return n=qt(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=qt(r.length-n,0),c=Array(i);++o<i;)c[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=c,e(t,this,u)}}function c(t){return Gt(t)||u(t)||!!(Yt&&t&&t[Yt])}function u(t){return a(t)&&Dt.call(t,"callee")&&(!It.call(t,"callee")||Wt.call(t)==Ct)}function f(t){return null!=t&&s(t.length)&&!l(t)}function a(t){return d(t)&&f(t)}function l(t){var n=p(t)?Wt.call(t):"";return n==Mt||n==Pt}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Tt}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function d(t){return!!t&&"object"==typeof t}function v(t,n,e){function r(n){var e=l,r=s;return l=s=void 0,g=n,d=t.apply(r,e)}function o(t){return g=t,v=setTimeout(u,n),w?r(t):d}function i(t){var e=t-g,r=n-(t-h);return b?dn(r,p-e):r}function c(t){var e=t-h,r=t-g;return void 0===h||e>=n||e<0||b&&r>=p}function u(){var t=vn();if(c(t))return f(t);v=setTimeout(u,i(t))}function f(t){return v=void 0,j&&l?r(t):(l=s=void 0,d)}function a(){var t=vn(),e=c(t);if(l=arguments,s=this,h=t,e){if(void 0===v)return o(h);if(b)return v=setTimeout(u,n),r(h)}return void 0===v&&(v=setTimeout(u,n)),d}var l,s,p,d,v,h,g=0,w=!1,b=!1,j=!0;if("function"!=typeof t)throw new TypeError(Zt);return n=m(n)||0,y(e)&&(w=!!e.leading,p=(b="maxWait"in e)?pn(m(e.maxWait)||0,n):p,j="trailing"in e?!!e.trailing:j),a.cancel=function(){void 0!==v&&clearTimeout(v),g=0,l=h=s=v=void 0},a.flush=function(){return void 0===v?d:f(vn())},a}function y(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function h(t){return!!t&&"object"==typeof t}function g(t){return"symbol"==typeof t||h(t)&&sn.call(t)==nn}function m(t){if("number"==typeof t)return t;if(g(t))return tn;if(y(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=y(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(en,"");var e=on.test(t);return e||cn.test(t)?un(t.slice(2),e?2:8):rn.test(t)?tn:+t}function w(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function b(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.throttle||50,o={callbacks:e.callbacks||[],throttle:r,scrollviews:{},locations:[],tracking:{},scrollDirection:"DOWN",previousScrollLocation:0,documentHeight:0,lastComponent:{},firedOnLastEntered:!1,onLastEntered:function(){}};t.$scrollview=An({state:o,set onLastEntered(t){"function"!=typeof t?console.error("[vue-scrollview]: onLastEntered expects a function."):(o.onLastEntered=t,this._onLastEntered=t)},get onLastEntered(){return this._onLastEntered}},En(o),xn(o)),n.component("ScrollView",$n),n.component("ScrollMarker",Ln)}var j="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},k=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),O=n(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),S=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_=S,E=function(t){try{return!!t()}catch(t){return!0}},x=!E(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$=S,L=k.document,A=$(L)&&$(L.createElement),T=function(t){return A?L.createElement(t):{}},C=S,M=function(t){if(!_(t))throw TypeError(t+" is not an object!");return t},P=!x&&!E(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}),F=function(t,n){if(!C(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!C(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!C(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!C(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},N=Object.defineProperty,V={f:x?Object.defineProperty:function(t,n,e){if(M(t),n=F(n,!0),M(e),P)try{return N(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},H=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},D=x?function(t,n,e){return V.f(t,n,H(1,e))}:function(t,n,e){return t[n]=e,t},W={}.hasOwnProperty,B=function(t,n){return W.call(t,n)},I=0,Y=Math.random(),q=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++I+Y).toString(36))},G=n(function(t){var n=k,e=D,r=B,o=q("src"),i=Function.toString,c=(""+i).split("toString");O.inspectSource=function(t){return i.call(t)},(t.exports=function(t,i,u,f){var a="function"==typeof u;a&&(r(u,"name")||e(u,"name",i)),t[i]!==u&&(a&&(r(u,o)||e(u,o,t[i]?""+t[i]:c.join(String(i)))),t===n?t[i]=u:f?t[i]?t[i]=u:e(t,i,u):(delete t[i],e(t,i,u)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||i.call(this)})}),U=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},z=function(t,n,e){if(U(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},K=k,R=O,J=D,Q=G,X=z,Z=function(t,n,e){var r,o,i,c,u=t&Z.F,f=t&Z.G,a=t&Z.S,l=t&Z.P,s=t&Z.B,p=f?K:a?K[n]||(K[n]={}):(K[n]||{}).prototype,d=f?R:R[n]||(R[n]={}),v=d.prototype||(d.prototype={});f&&(e=n);for(r in e)i=((o=!u&&p&&void 0!==p[r])?p:e)[r],c=s&&o?X(i,K):l&&"function"==typeof i?X(Function.call,i):i,p&&Q(p,r,i,t&Z.U),d[r]!=i&&J(d,r,c),l&&v[r]!=i&&(v[r]=i)};K.core=R,Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128;var tt=Z,nt={}.toString,et=function(t){return nt.call(t).slice(8,-1)},rt=et,ot=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==rt(t)?t.split(""):Object(t)},it=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},ct=Math.ceil,ut=Math.floor,ft=function(t){return isNaN(t=+t)?0:(t>0?ut:ct)(t)},at=Math.min,lt=et,st=Array.isArray||function(t){return"Array"==lt(t)},pt=k,dt=pt["__core-js_shared__"]||(pt["__core-js_shared__"]={}),vt=function(t){return dt[t]||(dt[t]={})},yt=n(function(t){var n=vt("wks"),e=q,r=k.Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:e)("Symbol."+t))}).store=n}),ht=S,gt=st,mt=yt("species"),wt=function(t){var n;return gt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!gt(n.prototype)||(n=void 0),ht(n)&&null===(n=n[mt])&&(n=void 0)),void 0===n?Array:n},bt=z,jt=ot,kt=function(t){return Object(it(t))},Ot=function(t){return t>0?at(ft(t),9007199254740991):0},St=function(t,n){return new(wt(t))(n)},_t=yt("unscopables"),Et=Array.prototype;void 0==Et[_t]&&D(Et,_t,{});var xt=tt,$t=function(t,n){var e=1==t,r=2==t,o=3==t,i=4==t,c=6==t,u=5==t||c,f=n||St;return function(n,a,l){for(var s,p,d=kt(n),v=jt(d),y=bt(a,l,3),h=Ot(v.length),g=0,m=e?f(n,h):r?f(n,0):void 0;h>g;g++)if((u||g in v)&&(s=v[g],p=y(s,g,d),t))if(e)m[g]=p;else if(p)switch(t){case 3:return!0;case 5:return s;case 6:return g;case 2:m.push(s)}else if(i)return!1;return c?-1:o||i?i:m}}(5),Lt=!0;"find"in[]&&Array(1).find(function(){Lt=!1}),xt(xt.P+xt.F*Lt,"Array",{find:function(t){return $t(this,t,arguments.length>1?arguments[1]:void 0)}}),function(t){Et[_t][t]=!0}("find");var At="Expected a function",Tt=9007199254740991,Ct="[object Arguments]",Mt="[object Function]",Pt="[object GeneratorFunction]",Ft="object"==typeof j&&j&&j.Object===Object&&j,Nt="object"==typeof self&&self&&self.Object===Object&&self,Vt=Ft||Nt||Function("return this")(),Ht=Object.prototype,Dt=Ht.hasOwnProperty,Wt=Ht.toString,Bt=Vt.Symbol,It=Ht.propertyIsEnumerable,Yt=Bt?Bt.isConcatSpreadable:void 0,qt=Math.max,Gt=Array.isArray,Ut=function(t){return i(function(n){var e=(n=o(n,1)).length,r=e;for(t&&n.reverse();r--;)if("function"!=typeof n[r])throw new TypeError(At);return function(){for(var t=0,r=e?n[t].apply(this,arguments):arguments[0];++t<e;)r=n[t].call(this,r);return r}})}(!0),zt=function(t){var n=0;if(t.offsetParent)do{n+=t.offsetTop,t=t.offsetParent}while(t);return n>=0?n:0},Kt=function(t,n){var e=n.map(function(t){return t.$vnode.key});return!Qt(e)&&!e.find(function(n){return!!t.locations.find(function(t){return t.component===n})})},Rt=function(t,n){return n.find(function(n){return n.component===t})},Jt=function(t){var n=zt(t);return{top:n,bottom:n+t.clientHeight}},Qt=function(t){return t.some(function(n,e){return t.indexOf(n)!==e})},Xt=function(){var t=document.body,n=document.documentElement;return t&&n?Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight):0},Zt="Expected a function",tn=NaN,nn="[object Symbol]",en=/^\s+|\s+$/g,rn=/^[-+]0x[0-9a-f]+$/i,on=/^0b[01]+$/i,cn=/^0o[0-7]+$/i,un=parseInt,fn="object"==typeof j&&j&&j.Object===Object&&j,an="object"==typeof self&&self&&self.Object===Object&&self,ln=fn||an||Function("return this")(),sn=Object.prototype.toString,pn=Math.max,dn=Math.min,vn=function(){return ln.Date.now()},yn=function(t,n,e){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(Zt);return y(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),v(t,n,{leading:r,maxWait:n,trailing:o})},hn=function(t,n){return function(){window.requestAnimationFrame(function(){n.forEach(function(n){return n&&n(t)})})}},gn=function(t){t.locations.forEach(function(n){var e=n.position,r=n.scrollview,o=n.component,i=t.scrollviews[r].offset,c=e.bottom-i-window.pageYOffset>0,u=e.top+i-window.pageYOffset<=window.innerHeight,f=c&&u;t.tracking[r][o]=f,f&&o===t.lastComponent.key&&t.lastComponent.key&&!t.firedOnLastEntered&&(t.onLastEntered(o),t.firedOnLastEntered=!0)})},mn=function(t){t.previousScrollLocation<=window.pageYOffset?t.scrollDirection="DOWN":t.scrollDirection="UP",t.previousScrollLocation=window.pageYOffset},wn=function(t){var n=t.scrollviews,e=t.tracking;Object.keys(n).forEach(function(t){return n[t].$emit("tracking:update",e[t])})},bn=function(t){var n=t.scrollviews;t.scrollviews={},t.tracking={},t.locations=[],Object.keys(n).forEach(function(t){return n[t].$emit("tracking:reset")}),t.scrollListener&&t.scrollListener()},jn=function(t,n){var e=n._uid;return n.$children.reduce(function(n,r){var o=r.$el,i=r.$vnode.key,c=Jt(o);return n.locations.push({position:c,scrollview:e,component:i}),n.tracking[i]=!1,kn(t,{scrollview:e,component:i,position:c}),n},{locations:[],tracking:{}})},kn=function(t,n){var e=n.component,r=n.position,o=n.scrollview;(!t.lastComponent.key||!t.lastComponent.position||t.lastComponent.position.top<r.top)&&(t.lastComponent={key:e,position:r,scrollview:o},t.firedOnLastEntered=!1)},On=function(t){return t.scrollListener=yn(hn(t,[gn,wn,mn].concat(w(t.callbacks))),t.throttle,{leading:!0}),document.addEventListener("scroll",t.scrollListener,!1),t},Sn=function(t){return setInterval(function(){return _n(t,function(){return bn(t)})},1e3),t},_n=function(t,n){var e=Xt();e!==t.documentHeight&&n(),t.documentHeight=e},En=function(t){return{_track:function(n){if(Kt(t,n.$children)){t.scrollviews[n._uid]=n;var e=jn(t,n),r=e.tracking,o=e.locations;return t.locations=t.locations.concat(o),t.tracking[n._uid]=r,gn(t),t.tracking[n._uid]}throw Error("[vue-scrollview]: Keys for components in a scrollview instance must be unique across all instances of scrollview.")},_untrack:function(n){var e=n._uid;delete t.tracking[e],delete t.scrollviews[e],t.locations=t.locations.filter(function(t){return t.scrollview!==e}),t.lastComponent.scrollview===e&&(t.lastComponent={},t.locations.forEach(function(n){return kn(t,n)}))},_initVueScrollview:function(){if(!t.scrollListener&&!t.recacheEl)return Ut(Sn,On)(t)}}},xn=function(t){return{scrollToComponent:function(n,e){var r=Rt(n,t.locations);if(r){var o=r.position,i=r.scrollview,c=t.scrollviews[i].offset,u=void 0!==e?e:c;window.scrollTo(0,o.top-u),t.scrollListener&&t.scrollListener()}},refresh:function(){return bn(t)},getComponentLocation:function(n){var e=Rt(n,t.locations);if(e)return e.position},getScrollDirection:function(){return t.scrollDirection}}},$n={render:function(t){return t(this.tag,[this.$scopedSlots.default(this.tracking)])},data:function(){return{tracking:{}}},mounted:function(){var n=this;t.$scrollview._initVueScrollview(),this.tracking=t.$scrollview._track(this),this.$on("tracking:update",function(t){return n.tracking=t}),this.$on("tracking:reset",function(){return n.tracking=t.$scrollview._track(n)})},beforeDestroy:function(){t.$scrollview._untrack(this)},props:{offset:{type:Number,default:function(){return 200}},tag:{type:String,default:function(){return"span"}}}},Ln={render:function(t){return t("div",{class:["vue-scrollview__marker",{debug:this.debug}],style:this.markerStyle},[t("span",{class:"vue-scrollview__marker--name",style:this.markerNameStyle},this.name)])},watch:{visible:function(t){t?this.$emit("isVisible",this.name):this.$emit("isNotVisible",this.name)}},computed:{markerStyle:function(){return{position:"relative",width:"100%",height:"1px",marginTop:this.spacing+"px",backgroundColor:this.debug?"red":"transparent"}},markerNameStyle:function(){return{display:this.debug?"block":"none",position:"absolute",bottom:"100%",left:"20px",color:"red",fontSize:"14px"}}},props:{name:{type:String,required:!0},visible:{type:Boolean,default:function(){return!1}},spacing:{type:Number,default:function(){return 300}},debug:{type:Boolean,default:function(){return!1}}}},An=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};t.$scrollview=void 0,"undefined"!=typeof window&&window.Vue&&(window.Vue.use(b),window.Vue.$scrollview=t.$scrollview);t.default=b,t.ScrollView=$n,t.ScrollMarker=Ln,t.version="3.0.1",Object.defineProperty(t,"__esModule",{value:!0})});